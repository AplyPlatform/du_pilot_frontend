!function(e){var t={};function o(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(n,a,function(t){return e[t]}.bind(null,a));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=1)}([,function(e,t){var o,n,a,i,r,l,s,d,c,_,u,m,f,g,A,p=new Array,v=new Array,N=new Array,h=new Array,y=new Array,b=new Array,T=new Array,S=0,L=(new Array,new Array,null),w="",D=!1,O="KR";function G(e){location.href="KR"==O||""==O?"index.html?action="+e:"index_en.html?action="+e}function J(e,t,o,n){$("#askModalLabel").text(e),$("#askModelContent").text(t),$("#askModalOKButton").text(o),$("#askModalOKButton").off("click"),$("#askModalOKButton").click((function(){$("#askModal").modal("hide"),n()})),$("#askModal").modal("show")}function C(e){$("#modal-title").text(LANG_JSON_DATA[O].modal_title),$("#modal-confirm-btn").text(LANG_JSON_DATA[O].modal_confirm_btn),$("#errorModalLabel").text(e),$("#errorModal").modal("show")}function k(e,t,o){0==e&&0==t?($("#r_count_label").text(LANG_JSON_DATA[O].r_count_label+" : 0"),$("#f_count_label").text(LANG_JSON_DATA[O].f_count_label+" : 0"),e=1,t=1):($("#r_count_label").text(LANG_JSON_DATA[O].r_count_label+" : "+e),$("#f_count_label").text(LANG_JSON_DATA[O].f_count_label+" : "+t)),$("#f_member_count_label").text("전체 회원수 : "+o),Chart.defaults.global.defaultFontFamily="Nunito",Chart.defaults.global.defaultFontColor="#858796";var n=document.getElementById("myPieChart");new Chart(n,{type:"doughnut",data:{labels:[LANG_JSON_DATA[O].r_count_label,LANG_JSON_DATA[O].f_count_label],datasets:[{data:[e,t],backgroundColor:["#4e73df","#1cc88a"],hoverBackgroundColor:["#2e59d9","#17a673"],hoverBorderColor:"rgba(234, 236, 244, 1)"}]},options:{maintainAspectRatio:!1,tooltips:{backgroundColor:"rgb(255,255,255)",bodyFontColor:"#858796",borderColor:"#dddfeb",borderWidth:1,xPadding:15,yPadding:15,displayColors:!1,caretPadding:10},legend:{display:!1},cutoutPercentage:80}})}function F(e,t,o){0==e&&0==t&&(e=1,t=1),Chart.defaults.global.defaultFontFamily="Nunito",Chart.defaults.global.defaultFontColor="#858796";var n=document.getElementById("myPieChart");new Chart(n,{type:"doughnut",data:{labels:[LANG_JSON_DATA[O].r_count_label,LANG_JSON_DATA[O].f_count_label],datasets:[{data:[e,t],backgroundColor:["#4e73df","#1cc88a"],hoverBackgroundColor:["#2e59d9","#17a673"],hoverBorderColor:"rgba(234, 236, 244, 1)"}]},options:{maintainAspectRatio:!1,tooltips:{backgroundColor:"rgb(255,255,255)",bodyFontColor:"#858796",borderColor:"#dddfeb",borderWidth:1,xPadding:15,yPadding:15,displayColors:!1,caretPadding:10},legend:{display:!1},cutoutPercentage:80}});const a={duration:5};var i;(i=new CountUp("r_count_label_time",e,a)).error?console.error(i.error):i.start(),(i=new CountUp("f_count_label_time",t,a)).error?console.error(i.error):i.start();var r=new CountUp("a_time_label_time",o/1e3/60,a);r.error?console.error(r.error):r.start()}function M(){var e=document.getElementById("lineGraph").getContext("2d"),t={datasets:[{label:LANG_JSON_DATA[O].altitude_msg,borderColor:"#f00",backgroundColor:"#f66",data:T}]};document.getElementById("lineGraph").onclick=function(e){He("LINEGRAPH","CONTENT",O);var t=window.myLine.getElementsAtEvent(e);if(t.length>0){var o=t[0]._index,n=b[o];"lng"in n&&"lat"in n&&function(e,t){Ce(window.myScatter,0,e),"dsec"in t&&Re(t.dsec);E(e),Ge([1*t.lng,1*t.lat],t.alt),W(1*t.lat,1*t.lng,t.alt,t.yaw,t.roll,t.pitch,!0)}(o,n)}},window.myLine=new Chart(e,{type:"scatter",data:t,tooltipEvents:["click"],options:{legend:{display:!1},title:{display:!1,text:"Temperature : RED / Humidity : BLUE"},events:["click"],tooltips:{callbacks:{label:function(e,t){var o=b[e.index];return JSON.stringify(o)}},scales:{xAxes:[{ticks:{userCallback:function(e,t,o){return y[e]}}}]},layout:{padding:{left:20,right:30,top:20,bottom:20}}}}})}$((function(){var e,t,n;0!=(e=Oe("user_email"),t=Oe("user_token"),n=Oe("dev_user_id"),0!=z(e)&&0!=z(n)&&0!=z(t)&&($("#email_field").text(e),$("#droneplaytoken_view").val(t),!0))?(!function(){O=Oe("language");var e=Oe("image_url");""==e?$("#profile_image").hide():$("#profile_image").attr("src",e);$("#side_menu_dashboard").text(LANG_JSON_DATA[O].side_menu_dashboard),$("#side_menu_flight_plan").text(LANG_JSON_DATA[O].side_menu_flight_plan),$("#side_menu_flight_plan_design").text(LANG_JSON_DATA[O].side_menu_flight_plan_design),$("#side_menu_flight_plan_list").text(LANG_JSON_DATA[O].side_menu_flight_plan_list),$("#side_menu_flight_plan_mon").text(LANG_JSON_DATA[O].side_menu_flight_plan_mon),$("#side_menu_flight_record").text(LANG_JSON_DATA[O].side_menu_flight_record),$("#side_menu_flight_record_upload").text(LANG_JSON_DATA[O].side_menu_flight_record_upload),$("#side_menu_flight_record_list").text(LANG_JSON_DATA[O].side_menu_flight_record_list),$("#side_menu_qa").text(LANG_JSON_DATA[O].side_menu_qa),$("#side_menu_links").text(LANG_JSON_DATA[O].side_menu_links),$("#side_menu_links_comm").text(LANG_JSON_DATA[O].side_menu_links_comm),$("#side_menu_links_blog").text(LANG_JSON_DATA[O].side_menu_links_blog),$("#side_menu_links_apis").text(LANG_JSON_DATA[O].side_menu_links_apis),$("#side_menu_links_dev").text(LANG_JSON_DATA[O].side_menu_links_dev),$("#top_menu_logout").text(LANG_JSON_DATA[O].top_menu_logout),$("#top_menu_token").text(LANG_JSON_DATA[O].top_menu_token),$("#askModalCancelButton").text(LANG_JSON_DATA[O].msg_cancel)}(),function(){o=!1,c=[],_=[],$("#btnLogout").click((function(){He("btnLogout","MEMU",O),J(LANG_JSON_DATA[O].modal_title,LANG_JSON_DATA[O].msg_are_you_sure,LANG_JSON_DATA[O].top_menu_logout,(function(){De("dev_user_id","",-1),De("user_token","",-1),G("logout")}))}));var e=document.getElementById("page_data").getAttribute("page_action");ye(),"center"==e&&(document.title=LANG_JSON_DATA[O].page_center_title,$("#head_title").text(document.title),$("#center_about_title").text(LANG_JSON_DATA[O].center_about_title),$("#center_about_content").html(LANG_JSON_DATA[O].center_about_content),$("#center_example_title").html(LANG_JSON_DATA[O].center_example_title),$("#data_title").text("'"+Oe("user_email")+"'"+LANG_JSON_DATA[O].data_count_msg),$("#r_count_label").text(LANG_JSON_DATA[O].r_count_label),$("#f_count_label").text(LANG_JSON_DATA[O].f_count_label),$("#a_time_label").text(LANG_JSON_DATA[O].a_time_label),$("#a_time_min_label").text(LANG_JSON_DATA[O].a_time_min_label),t={action:"position",daction:"data_count",clientid:Oe("dev_user_id")},ye(),_e(t,(function(e){"success"==e.result?(be(),F(e.record_count,e.mission_count,e.alltime)):(F(0,0,0),be())}),(function(e,t,o){F(0,0,0),be()})));var t;"qa"==e?(document.title=LANG_JSON_DATA[O].page_qa_title,$("#head_title").text(document.title),$("#qa_label").text(LANG_JSON_DATA[O].qa_label)):"design"==e?(he(),function(){document.title=LANG_JSON_DATA[O].page_mission_design_title,$("#head_title").text(document.title),$("#msg_tracker").text(LANG_JSON_DATA[O].msg_tracker),$("#map_kind_label").text(LANG_JSON_DATA[O].map_kind_label),$("#go_index_direct_label").text(LANG_JSON_DATA[O].go_index_direct_label),$("#btnForRegistMission").text(LANG_JSON_DATA[O].btnForRegistMission),$("#btnForClearMission").text(LANG_JSON_DATA[O].btnForClearMission),$("#removeItemBtn").text(LANG_JSON_DATA[O].msg_remove),$("#saveItemBtn").text(LANG_JSON_DATA[O].msg_apply),e=1,$("#slider").slider({min:0,max:e-1,value:0,step:1,slide:function(e,t){if(He("slider","CONTENT",O),!(_.length<=0)){var o=_[t.value];q(t.value),Fe(t.value,o)}}}),$("#goItemBtn").click((function(){He("goItemBtn","CONTENT",O);var e=$("#goItemIndex").val();if(z(e)&&0!=$.isNumeric(e))if((e=parseInt(e))<0||e>=_.length)C("Please input valid value !");else{var t=_[e];$("#slider").slider("value",e),q(e),Me(e,t)}else C("Please input valid value !")})),r.on("click",(function(e){He("DESIGN_MAP","CONTENT",O);var t=r.forEachFeatureAtPixel(e.pixel,(function(e){return e}));if(t){var o=t.get("mindex");if(!z(o))return;return q(o),void Ee(o,_[o])}V(ol.proj.toLonLat(e.coordinate))}));var e;var t="",o=location.search.split("mission_name=")[1];if(o=decodeURIComponent(o),z(t)&&""!=t)!function(e){var t=Oe("dev_user_id"),o={action:"position",daction:"download_spe",name:e,clientid:t};ye(),_e(o,(function(e){if("success"==e.result){if(be(),!z(e.data.data)||0==e.data.data.length)return;_=e.data.data,U()}else C(LANG_JSON_DATA[O].msg_no_flight_record),be()}),(function(e,t,o){ae(LANG_JSON_DATA[O].msg_error_sorry),be()}))}(t=t.split("&")[0]);else if(z(o)&&""!=o)!function(e){var t=Oe("dev_user_id"),o={action:"mission",daction:"get_spec",mname:e,clientid:t};ye(),_e(o,(function(e){if("success"==e.result){if(be(),!z(e.data.mission)||0==e.data.mission.length)return;_=e.data.mission,U()}else C(LANG_JSON_DATA[O].msg_no_mission),be()}),(function(e,t,o){ae(LANG_JSON_DATA[O].msg_error_sorry),be()}))}(o=o.split("&")[0]);else{var n=new ol.layer.Vector({source:l});r.addLayer(n),be()}$("#saveItemBtn").off("click"),$("#saveItemBtn").click((function(){He("saveItemBtn","CONTENT",O),K(0)})),$("#btnForRegistMission").off("click"),$("#btnForRegistMission").click((function(){He("btnForRegistMission","CONTENT",O),function(){var e=prompt(LANG_JSON_DATA[O].msg_input_mission_name,"");if(!z(e))return void C(LANG_JSON_DATA[O].msg_wrong_input);var t=prompt(LANG_JSON_DATA[O].msg_input_speed,"");if(!z(t)||parseFloat(t)<=0)return void C(LANG_JSON_DATA[O].msg_wrong_input);if(_.length<=0)return void C(LANG_JSON_DATA[O].msg_wrong_input);for(var o=[],n=0,a=0;a<_.length;a++){var i=_[a];if(null==i.act||""===i.act||null==i.lat||""===i.lat||null==i.lng||""===i.lng||null==i.alt||""===i.alt||null==i.actparam||""===i.actparam)return ae(LANG_JSON_DATA[O].msg_error_index_pre+a+LANG_JSON_DATA[O].msg_error_index_post),void n++;var r="mid-"+a;o.push({id:r,lat:i.lat,lng:i.lng,alt:i.alt,act:i.act,actparam:i.actparam,speed:i.speed,roll:i.roll,pitch:i.pitch,yaw:i.yaw})}if(n>0)return void C(LANG_JSON_DATA[O].msg_error_check);var l=Oe("dev_user_id");_e({action:"mission",mname:e,daction:"set",missionspeed:t,missiondata:o,clientid:l},(function(e){"success"==e.result?C(LANG_JSON_DATA[O].msg_success):C(LANG_JSON_DATA[O].msg_error_sorry)}),(function(e,t,o){}))}()})),$("#btnForClearMission").off("click"),$("#btnForClearMission").click((function(){He("btnForClearMission","CONTENT",O),J(LANG_JSON_DATA[O].modal_title,LANG_JSON_DATA[O].msg_are_you_sure,LANG_JSON_DATA[O].btnForClearMission,(function(){z(d)&&d.clear(),s.clear(),l.clear(),_=Array(),$("#dataTable-points").hide()}))})),$("#btnForSearchAddress").off("click"),$("#btnForSearchAddress").click((function(){He("btnForSearchAddress","CONTENT",O),function(e,t,o){$.ajax({url:"https://maps.googleapis.com/maps/api/geocode/json?address="+e+"&key=AIzaSyANkdJYJ3zKXAjOdPFrhEEeq4M8WETn0-4",crossDomain:!0,cache:!1,type:"GET",success:function(e){t(e)},error:function(e,t,n){ae("code:"+e.status+"\nmessage:"+e.responseText+"\nerror:"+n),o(e,t,n)}})}($("#queryData").val(),(function(e){Se(e.results[0].geometry.location.lat,e.results[0].geometry.location.lng,0,(function(){}))}),(function(e,t,o){C(LANG_JSON_DATA[O].msg_error_sorry)}))}))}()):"list"==e?(document.title=LANG_JSON_DATA[O].page_list_title,$("#head_title").text(LANG_JSON_DATA[O].page_center_title),$("#name_label").text(LANG_JSON_DATA[O].name_label),$("#status_label").text(LANG_JSON_DATA[O].status_label),$("#date_label").text(LANG_JSON_DATA[O].date_label),$("#manage_label").text(LANG_JSON_DATA[O].manage_label),$("#btnForGetMissionList").text(LANG_JSON_DATA[O].btnForGetMissionList),$("#search_key").attr("placeholder",LANG_JSON_DATA[O].msg_mission_search_key),$("#btnForSearchMission").click((function(){He("btnForSearchMission","CONTENT",O),function(e){if(0!=z(e)){var t=Oe("dev_user_id");A="",_e({action:"mission",daction:"find_mission",keyword:e,clientid:t},(function(e){"success"==e.result?($("#dataTable-missions tbody").empty(),S=0,Z(e.data),e.morekey?($("#btnForGetMissionList").text(LANG_JSON_DATA[O].msg_load_more),A=e.morekey):($("#btnForGetMissionList").hide(1500),A=null)):"no data"==e.reason?C(LANG_JSON_DATA[O].msg_no_data):C(LANG_JSON_DATA[O].msg_error_sorry)}),(function(e,t,o){ae("code:"+e.status+"\nmessage:"+e.responseText+"\nerror:"+o)}))}else C(LANG_JSON_DATA[O].msg_wrong_input)}($("#search_key").val())})),$("#btnForGetMissionList").click((function(){var e;He("btnForGetMissionList","CONTENT",O),e={action:"mission",daction:"get",clientid:Oe("dev_user_id")},A&&(e.morekey=A),_e(e,(function(e){"success"==e.result?(Z(e.data),e.morekey?($("#btnForGetMissionList").text(LANG_JSON_DATA[O].msg_load_more),A=e.morekey):($("#btnForGetMissionList").hide(1500),A=null)):"no data"==e.reason?C(LANG_JSON_DATA[O].msg_no_data):C(LANG_JSON_DATA[O].msg_error_sorry)}),(function(e,t,o){ae("code:"+e.status+"\nmessage:"+e.responseText+"\nerror:"+o)}))})),be()):"monitor"==e?function(){document.title=LANG_JSON_DATA[O].page_monitor_title,$("#head_title").text(document.title),$("#btnStartMon").text(LANG_JSON_DATA[O].btnStartMon);var e=location.search.split("mission_name=")[1];z(e)&&(e=e.split("&")[0]);(function(e){if(null==e||""==e)return;_e({action:"mission",daction:"get",clientid:Oe("dev_user_id")},(function(t){if("success"==t.result){var o=t.data;if(null==o)return;if(0==o.length)return;o.forEach((function(t,o,n){t.name==e&&function(e){if(null==e)return;if(0==e.length)return;e.forEach((function(e,t,o){S++;var n=e.id;null==n&&(n="mission-"+S);var a=e.act;a>=Y.length&&(a=0);var i="<tr class='odd gradeX' id='"+n+"'><td>"+S+"</td><td><table border=0 width='100%'><tr><td width='50%' class='center' bgcolor='#eee'>"+e.lat+"</td><td width='50%' class='center' bgcolor='#fff'> "+e.lng+"</td></tr><tr><td class='center' bgcolor='#eee'>"+e.alt+"/"+e.speed+"</td><td class='center'>"+Y[a]+"/"+e.actparam+"</td></tr></table></td></tr>";$("#monitorTable-points > tbody:last").append(i)}))}(t.mission)})),be()}else"no data"==t.reason?C(LANG_JSON_DATA[O].msg_no_data):C(LANG_JSON_DATA[O].msg_error_sorry),be()}),(function(e,t,o){ae("code:"+e.status+"\nmessage:"+e.responseText+"\nerror:"+o),be()}))})(e),$("#btnStartMon").click((function(){He("btnStartMon","CONTENT",O),1==o?(o=!1,$("#btnStartMon").text("Start monitoring"),$("#btnStartMon").removeClass("btn-warning").addClass("btn-primary"),$("#loader").hide()):H()})),be()}():"flightlist"==e?(document.title=LANG_JSON_DATA[O].page_flight_rec_upload_title,$("#head_title").text(document.title),$("#msg_dji_file_upload").text(LANG_JSON_DATA[O].msg_dji_file_upload),$("#btnForUploadFlightList").text(LANG_JSON_DATA[O].msg_upload),$("#msg_dji_file_upload").text(LANG_JSON_DATA[O].msg_dji_file_upload),$("#msg_duni_file_upload").text(LANG_JSON_DATA[O].msg_duni_file_upload),$("#btnForUploadDUNIFlightList").text(LANG_JSON_DATA[O].msg_upload),$("#dji_flight_record_get_label").text(LANG_JSON_DATA[O].dji_flight_record_get_label),$("#duni_flight_record_format_label").text(LANG_JSON_DATA[O].duni_flight_record_format_label),$("#collapseRecordFileParams").html(LANG_JSON_DATA[O].collapseRecordFileParams),$("#btnForUploadFlightList").click((function(){He("btnForUploadFlightList","CONTENT",O),function(){var e=document.getElementById("file").files;if(e.length>0){var t=prompt(LANG_JSON_DATA[O].msg_input_record_name,"");z(t)?(ye(),xe(e[0],t,we)):C(LANG_JSON_DATA[O].msg_wrong_input)}else C(LANG_JSON_DATA[O].msg_select_file)}()})),$("#btnForUploadDUNIFlightList").click((function(){He("btnForUploadDUNIFlightList","CONTENT",O),function(){var e=document.getElementById("dunufile").files;if(e.length>0){var t=prompt(LANG_JSON_DATA[O].msg_input_record_name,"");z(t)?(ye(),xe(e[0],t,Le)):C(LANG_JSON_DATA[O].msg_wrong_input)}else C(LANG_JSON_DATA[O].msg_select_file)}()})),be()):"flight_view"==e?(he(),function(){var e=ol.proj.fromLonLat([0,0]);m=new ol.View({center:e,zoom:8}),u=new ol.source.Vector;var t=new ol.layer.Vector({source:u,zIndex:1e4,style:new ol.style.Style({fill:new ol.style.Fill({color:"rgba(255, 255, 255, 0.2)"}),stroke:new ol.style.Stroke({color:"#ff0000",width:2}),image:new ol.style.Circle({radius:7,fill:new ol.style.Fill({color:"#ff0000"})})})}),o=new ol.layer.Tile({visible:!0,preload:1/0,source:new ol.source.BingMaps({key:"AgMfldbj_9tx3cd298eKeRqusvvGxw1EWq6eOgaVbDsoi7Uj9kvdkuuid-bbb6CK",imagerySet:"AerialWithLabels",maxZoom:19})});new ol.Map({target:"historyMap",layers:[o,t],loadTilesWhileAnimating:!0,view:m})}(),document.title=LANG_JSON_DATA[O].page_flight_rec_view_title,$("#head_title").text(document.title),$("#flightMemoBtn").text(LANG_JSON_DATA[O].msg_modify_memo),$("#btnForLoadFlightList").text(LANG_JSON_DATA[O].btnForLoadFlightList),$("#name_label").text(LANG_JSON_DATA[O].name_label),$("#date_label").text(LANG_JSON_DATA[O].date_label),$("#manage_label").text(LANG_JSON_DATA[O].manage_label),$("#search_key").attr("placeholder",LANG_JSON_DATA[O].msg_record_search_key),$("#btnForSearchFlightRecord").click((function(){He("btnForSearchFlightRecord","CONTENT",O),function(e){if(0!=z(e)){var t=Oe("dev_user_id"),o={action:"position",daction:"find_record",keyword:e,clientid:t};A="",ye(),_e(o,(function(e){if(be(),"success"==e.result){if(null==e.data||0==e.data.length)return void C(LANG_JSON_DATA[O].msg_no_data);e.morekey?(A=e.morekey,$("#btnForLoadFlightList").text(LANG_JSON_DATA[O].msg_load_more)):(A=null,$("#btnForLoadFlightList").hide(1500)),$("#historyMap").show(),c=[],$("#dataTable-Flight_list tbody").empty(),S=0,X(e.data)}else"no data"==e.reason?C(LANG_JSON_DATA[O].msg_no_data):C(LANG_JSON_DATA[O].msg_error_sorry)}),(function(e,t,o){be(),ae("code:"+e.status+"\nmessage:"+e.responseText+"\nerror:"+o)}))}else C(LANG_JSON_DATA[O].msg_wrong_input)}($("#search_key").val())})),$("#btnForLoadFlightList").click((function(){var e;He("btnForLoadFlightList","CONTENT",O),e={action:"position",daction:"download",clientid:Oe("dev_user_id")},z(A)&&(e.morekey=A),ye(),_e(e,(function(e){if(be(),"success"==e.result){if(null==e.data||0==e.data.length)return void C(LANG_JSON_DATA[O].msg_no_data);e.morekey?(A=e.morekey,$("#btnForLoadFlightList").text(LANG_JSON_DATA[O].msg_load_more)):(A=null,$("#btnForLoadFlightList").hide(1500)),$("#historyMap").show(),X(e.data)}else"no data"==e.reason?C(LANG_JSON_DATA[O].msg_no_data):C(LANG_JSON_DATA[O].msg_error_sorry)}),(function(e,t,o){be(),ae("code:"+e.status+"\nmessage:"+e.responseText+"\nerror:"+o)}))})),be()):"flight_view_detail"==e?(he(),function(){document.title=LANG_JSON_DATA[O].page_flight_rec_view_title,$("#head_title").text(document.title),$("#modifyBtnForMovieData").text(LANG_JSON_DATA[O].modifyBtnForMovieData),$("#title_for_moviedata_label").text(LANG_JSON_DATA[O].title_for_moviedata_label),$("#desc_for_moviedata_label").text(LANG_JSON_DATA[O].desc_for_moviedata_label),$("#privacy_for_moviedata_label").text(LANG_JSON_DATA[O].privacy_for_moviedata_label),$("#option_public_label").text(LANG_JSON_DATA[O].option_public_label),$("#option_unlisted_label").text(LANG_JSON_DATA[O].option_unlisted_label),$("#option_private_label").text(LANG_JSON_DATA[O].option_private_label),$("#uploadVideoToYoutubeButton").text(LANG_JSON_DATA[O].uploadVideoToYoutubeButton),$("#flightMemoBtn").text(LANG_JSON_DATA[O].msg_modify_memo),$("#altitude_label").text(LANG_JSON_DATA[O].altitude_label),$("#youtube_url_label").text(LANG_JSON_DATA[O].youtube_url_label),$("#btnForSetYoutubeID").text(LANG_JSON_DATA[O].msg_apply),$("#map_kind_label").text(LANG_JSON_DATA[O].map_kind_label),$("#input_memo_label").text(LANG_JSON_DATA[O].input_memo_label),$("#btnForSetYoutubeID").click((function(){He("btnForSetYoutubeID","CONTENT",O),function(){var e=$("#movieData").val();if(""==e)return void C("Invalid URL");D=!1,e.indexOf("youtube")>=0?(Be(e),function(e){var t=Oe("dev_user_id"),o={action:"position",daction:"youtube",youtube_data_id:e,clientid:t,name:w};ye(),_e(o,(function(e){be(),e.result}),(function(e,t,o){be(),ae("code:"+e.status+"\nmessage:"+e.responseText+"\nerror:"+o)}))}(e)):Be("");1==D?Ie():Pe()}()}));var e=location.search.split("record_name=")[1];null!=e&&""!=e&&function(e){Q(e),w=e,$("#movieTitle").val(e),$("#movieDescription").val(e);var t=Oe("dev_user_id"),o={action:"position",daction:"download_spe",name:e,clientid:t};ye(),_e(o,(function(t){if("success"!=t.result)C(LANG_JSON_DATA[O].msg_error_sorry);else{var o=t.data;if(D=!1,"memo"in o&&$("#memoTextarea").val(o.memo),$("#flightMemoBtn").click((function(){He("flightMemoBtn","CONTENT",O),function(e,t){var o=Oe("dev_user_id");if(!z(t))return void C(LANG_JSON_DATA[O].msg_fill_memo);var n={action:"position",daction:"set_memo",clientid:o,name:e,memo:t};ye(),_e(n,(function(e){be(),"success"!=e.result?C(LANG_JSON_DATA[O].msg_error_sorry):C(LANG_JSON_DATA[O].msg_success)}),(function(e,t,o){be(),ae("code:"+e.status+"\nmessage:"+e.responseText+"\nerror:"+o)}))}(e,$("#memoTextarea").val())})),"youtube_data_id"in o?(o.youtube_data_id.indexOf("youtube")>=0?Be(o.youtube_data_id):Be(""),Ie()):($("#youTubePlayer").hide(),$("#googlePhotoPlayer").hide()),1==D?Ie():Pe(),re(o.data),z(o.cada)||null!=o.cada)te("#map_address",o.address,o.cada,s);else if(z(o.flat)){var n=ol.proj.fromLonLat([o.flng,o.flat]);ee("#map_address",e,n[0],n[1],s)}be()}}),(function(e,t,o){be(),ae("code:"+e.status+"\nmessage:"+e.responseText+"\nerror:"+o)}))}(decodeURI(e))}()):"dromi"==e?(he(),document.title=LANG_JSON_DATA[O].page_dromi_title,$("#head_title").text(document.title),$("#chartView").hide(),$("#uploadBtn").click((function(){if(He("uploadBtn","CONTENT",O),""==w){var e=prompt("데이터셋의 이름을 입력해 주세요.","");if(null==e)return void C("데이터셋의 이름을 잘못 입력하셨습니다.");Ue("",e)}else Ue(w,"")})),function(){for(var e=new Date,t=e.getDate(),o=e.getMonth()+1,n=e.getFullYear(),a=e.getHours(),i="<option>",r=2010;r<=n;r++)$("#selYear").append($(i,{value:r,text:""+r})),$("#selYear2").append($(i,{value:r,text:""+r}));for($("#selYear").val(n).prop("selected",!0),$("#selYear2").val(n).prop("selected",!0),r=1;r<=12;r++){i="<option>";var l=String(r).padStart(2,"0");$("#selMon").append($(i,{value:l,text:l})),$("#selMon2").append($(i,{value:l,text:l}))}var s=String(o).padStart(2,"0");for($("#selMon").val(s).prop("selected",!0),$("#selMon2").val(s).prop("selected",!0),r=1;r<=31;r++)l=String(r).padStart(2,"0"),$("#selDay").append($(i,{value:l,text:l})),$("#selDay2").append($(i,{value:l,text:l}));for(s=String(t).padStart(2,"0"),$("#selDay").val(s).prop("selected",!0),$("#selDay2").val(s).prop("selected",!0),r=0;r<=24;r++)l=String(r).padStart(2,"0"),$("#selHour").append($(i,{value:l,text:l})),$("#selHour2").append($(i,{value:l,text:l}));s=String(a).padStart(2,"0"),$("#selHour").val(s).prop("selected",!0),$("#selHour2").val(s).prop("selected",!0)}(),window.File&&window.FileReader&&window.FileList&&window.Blob?document.getElementById("filePicker").addEventListener("change",(function(e){var t=e.target.files,o=t[0];if(t&&o){var n=new FileReader;n.onload=function(e){var t=e.target.result;p=function(e){var t=e.split("\n");if(0!=t.length){var o=new Array;t.forEach((function(e){var t=e.split(","),n=je(t[0]);o.push({dtime:n,t:t[2],h:t[1]})}));var n=t[0].split(","),a=new Date(n[0]),i=t[t.length-2].split(","),r=new Date(i[0]);$("#selYear").val(a.getFullYear()).prop("selected",!0),$("#selYear2").val(r.getFullYear()).prop("selected",!0);var l=String(a.getMonth()+1).padStart(2,"0");return $("#selMon").val(l).prop("selected",!0),l=String(r.getMonth()+1).padStart(2,"0"),$("#selMon2").val(l).prop("selected",!0),l=String(a.getDate()).padStart(2,"0"),$("#selDay").val(l).prop("selected",!0),l=String(r.getDate()).padStart(2,"0"),$("#selDay2").val(l).prop("selected",!0),l=String(a.getHours()).padStart(2,"0"),$("#selHour").val(l).prop("selected",!0),l=String(r.getHours()).padStart(2,"0"),$("#selHour2").val(l).prop("selected",!0),o}}(t)},n.readAsText(o)}}),!1):ae("The File APIs are not fully supported in this browser."),be()):"dromi_list"==e?(he(),document.title=LANG_JSON_DATA[O].page_dromi_list_title,$("#head_title").text(document.title),$("#chartView").hide(),$("#googlePhotoPlayer").hide(),$("#youTubePlayer").hide(),Ie(),be()):"summary"==e&&function(){document.title=LANG_JSON_DATA[O].page_center_title,e=Oe("dev_user_id"),t=Oe("user_email"),o={action:"position",daction:"summary",clientid:e,email:t},ye(),_e(o,(function(e){"success"==e.result?(be(),k(e.record_count,e.mission_count,e.member_count)):(k(0,0,0),be())}),(function(e,t,o){k(0,0,0),be()}));var e,t,o}()}(),mixpanel.identify(Oe("dev_user_id"))):G("")}));function E(e){z($("#slider"))&&(e<0?$("#sliderText").html("-"):($("#slider").slider("value",e),$("#sliderText").html(e)))}function I(e){if(z(e)&&(z($("#yawStatus"))&&z(document.getElementById("yawStatus")))){var t=(e*=1)<0?360+e:e;e=Math.PI/180*e,$("#yawStatus").attr("src",$("#yawStatus").attr("src")),$("#yawStatus").css({transform:"rotate("+t+"deg)","-ms-transform":"rotate("+t+"deg)","-moz-transform":"rotate("+t+"deg)","-webkit-transform":"rotate("+t+"deg)","-o-transform":"rotate("+t+"deg)"}),e=e.toFixed(3),$("#yawText").text(e)}}function P(e){if(z(e)&&(z($("#pitchStatus"))&&z(document.getElementById("pitchStatus")))){var t=(e*=1)<0?360+e:e;t=Math.PI/180*t,$("#pitchStatus").attr("src",$("#pitchStatus").attr("src")),$("#pitchStatus").css({transform:"rotate("+t+"deg)","-ms-transform":"rotate("+t+"deg)","-moz-transform":"rotate("+t+"deg)","-webkit-transform":"rotate("+t+"deg)","-o-transform":"rotate("+t+"deg)"}),e=e.toFixed(3),$("#pitchText").text(e)}}function B(e){if(z(e)&&z($("#rollCanvas"))){var t=document.getElementById("rollCanvas");if(z(t)){var o=180+(e*=1),n=o+180;n>360&&(n-=360);var a=Math.PI/180*o,i=Math.PI/180*n,r=t.getContext("2d");r.clearRect(0,0,t.width,t.height),r.beginPath(),r.arc(30,30,20,a,i,!0),r.closePath(),r.lineWidth=1,r.fillStyle="blue",r.fill(),r.strokeStyle="#0000aa",r.stroke(),e=e.toFixed(3),$("#rollText").text(e)}}}function R(e,t){var o,n=new ol.Feature({geometry:new ol.geom.Point(ol.proj.fromLonLat([1*t.lng,1*t.lat])),name:"lat: "+t.lat+", lng: "+t.lng+", alt: "+t.alt,mindex:e});return n.setStyle((o=e+"",[new ol.style.Style({image:new ol.style.Icon({opacity:.75,crossOrigin:"anonymous",scale:2,src:"./imgs/position3.png"}),text:new ol.style.Text({font:"12px Calibri,sans-serif",fill:new ol.style.Fill({color:"#000"}),stroke:new ol.style.Stroke({color:"#fff",width:2}),text:r.getView().getZoom()>12?o:""})})])),n}function j(e,t){var o=R(e,t);l.addFeature(o)}function U(){var e=0,t=[];_.forEach((function(o){j(e,o),t.push(ol.proj.fromLonLat([1*o.lng,1*o.lat])),e++})),q(0),$("#slider").slider("option",{min:0,max:e-1}),E(e);var o=new ol.geom.LineString(t);d=new ol.source.Vector({features:[new ol.Feature({geometry:o,name:"Line"})]}),f=new ol.layer.Vector({source:d,style:new ol.style.Style({stroke:new ol.style.Stroke({color:"#00ff00",width:2})})}),g=new ol.layer.Vector({source:l}),r.addLayer(f),r.addLayer(g),W(_[0].lat,_[0].lng,_[0].alt,_[0].yaw,_[0].roll,_[0].pitch)}function V(e){var t=_.length;t<=0&&($("#slider").show(),$("#dataTable-points").show());var o=[];o.alt=0,o.speed=0,o.yaw=0,o.pitch=0,o.roll=0,o.act=0,o.actparam=0,o.lng=e[0],o.lat=e[1],_.push(o),$("#slider").slider("option",{min:0,max:t}),$("#slider").slider("value",t),q(t),j(t,o)}function H(){_e({action:"position",daction:"get",clientid:Oe("dev_user_id")},(function(e){"success"==e.result?(o=!0,$("#loader").show(),$("#btnStartMon").text("Stop monitoring"),$("#btnStartMon").removeClass("btn-primary").addClass("btn-warning"),function(e){if(e.positiontime==$e)return void setTimeout((function(){0!=o&&H()}),5e3);if("missionid"in e&&$("#"+e.missionid).length>0)$("#"+e.missionid).children("td, th").css("background-color","#ff0");else{var t="<tr class='odd gradeX' id='"+("mission-"+ ++S)+"'><td class='center'></td><td class='center'>"+e.lat+" | "+e.lng+"<hr size=1>"+e.alt+" | "+e.positiontime+" </td></tr>";$("#monitorTable-points > tbody:last").append(t)}$e=e.positiontime,Se(1*e.lat,1*e.lng,e.yaw,(function(){})),setTimeout((function(){0!=o&&H()}),2500)}(e.data[0])):C(LANG_JSON_DATA[O].msg_failed_to_get_position)}),(function(e,t,o){C(LANG_JSON_DATA[O].msg_error_sorry)}))}function z(e){return""!=e&&null!=e&&"undefined"!=e}var Y=["STAY","START_TAKE_PHOTO","START_RECORD","STOP_RECORD","ROTATE_AIRCRAFT","GIMBAL_PITCH","NONE","CAMERA_ZOOM","CAMERA_FOCUS"];function W(e,t,o,n,a,i,r){B(a),I(n),P(i),function(e,t,o,n,a,i){var r=Cesium.Cartesian3.fromDegrees(t,e,o);a=(a*=1)<0?360+a:a,a=Math.PI/180*a,n=(n*=1)<0?360+n:n,n=Math.PI/180*n,i=(i*=1)<0?360+i:i,i=Math.PI/180*i,Ae.pitch=n,Ae.heading=a,Ae.roll=i,Cesium.Transforms.headingPitchRollToFixedFrame(r,Ae,Cesium.Ellipsoid.WGS84,ue,me.modelMatrix)}(e,t,o,i,n,a),1==r?Te(e,t,o,n):Se(e,t,n,(function(){}))}function q(e){if(!(_.length<=0)){var t=_[e].lat,o=_[e].lng,n=_[e].alt,a=_[e].yaw,i=_[e].roll,d=_[e].pitch,c=_[e].speed,u=_[e].act,m=_[e].actparam;$("#tr_index").text(e),$("#latdata_index").val(t),$("#lngdata_index").val(o),$("#altdata_index").val(n),$("#rolldata_index").val(i),$("#pitchdata_index").val(d),$("#yawdata_index").val(a),$("#speeddata_index").val(c),$("#actiondata_index").val(u).prop("selected",!0),$("#actionparam_index").val(m),$("#removeItemBtn").off("click"),$("#removeItemBtn").click((function(){He("removeItemBtn","CONTENT",O),function(e){if(_.splice(e,1),function(e){var t=s.getFeatures();if(null!=t&&t.length>0)for(x in t){if(t[x].getProperties().id==e){s.removeFeature(t[x]);break}}}(e),_.length<=0)return $("#slider").hide(),void $("#dataTable-points").hide();var t=_.length-1;q(t),$("#slider").slider("value",t),$("#slider").slider("option",{min:0,max:t}),W(_[t].lat,_[t].lng,_[t].yaw,_[t].alt,_[t].roll,_[t].pitch,!1)}(e),function(e){var t,o=l.getFeatures();for(t=0;t<o.length;t++)l.removeFeature(o[t]);r.removeLayer(f),r.removeLayer(g),U()}()})),$("#saveItemBtn").off("click"),$("#saveItemBtn").click((function(){He("saveItemBtn","CONTENT",O),K(e)}))}}function K(e){if(_.length<=0){var t=$("#lngdata_index").val(),o=$("#latdata_index").val();V([1*t,1*o]),Te(1*o,1*t,parseFloat($("#altdata_index").val()),$("#yawdata_index").val())}_[e].lat=parseFloat($("#latdata_index").val()),_[e].lng=parseFloat($("#lngdata_index").val()),_[e].alt=parseFloat($("#altdata_index").val()),_[e].yaw=parseFloat($("#yawdata_index").val()),_[e].roll=parseFloat($("#rolldata_index").val()),_[e].pitch=parseFloat($("#pitchdata_index").val()),_[e].speed=parseFloat($("#speeddata_index").val()),_[e].act=parseInt($("#actiondata_index").val()),_[e].actparam=parseFloat($("#actionparam_index").val())}function Z(e){null!=e&&0!=e.length&&e.forEach((function(e,t,o){var n="<tr class='odd gradeX' id='mission_row_"+t+"'><td class='center'><a href='./monitor.html?mission_name="+e.name+"' class='font-weight-bold mb-1'>"+e.name+"</a></td><td class='center'> - </td><td class='center text-xs font-weight-bold mb-1'>"+e.regtime+"</td><td class='center text-xs font-weight-bold mb-1'><a class='btn btn-warning text-xs' href='design.html?mission_name="+e.name+"' role='button'>"+LANG_JSON_DATA[O].msg_modify+"</a>&nbsp;<button class='btn btn-primary text-xs' type='button' id='missionListBtnForRemove_"+t+"'>"+LANG_JSON_DATA[O].msg_remove+"</button></td></tr>";$("#dataTable-missions > tbody:last").append(n),$("#missionListBtnForRemove_"+t).click((function(){He("missionListBtnForRemove_"+t,"CONTENT",O),function(e,t){J(LANG_JSON_DATA[O].modal_title,e+" : "+LANG_JSON_DATA[O].msg_are_you_sure,LANG_JSON_DATA[O].msg_remove,(function(){!function(e,t){var o=Oe("dev_user_id");_e({action:"mission",mname:e,daction:"delete",clientid:o},(function(e){"success"==e.result?$("#"+t).remove():C(LANG_JSON_DATA[O].msg_error_sorry)}),(function(e,t,o){}))}(e,t)}))}(e.name,"mission_row_"+t)}))}))}S=0;function X(e){null!=e&&0!=e.length&&e.forEach((function(e){!function(e){var t=e.name,o=e.dtime,n=(e.data,e.flat),a=e.flng,i=e.address,r=e.cada,l=e.memo,s="<tr class='odd gradeX' id='flight-list-"+S+"'><td width='10%' class='text-xs font-weight-bold mb-1' bgcolor='#fff'>"+(S+1)+"</td>";s=s+"<td class='center' bgcolor='#eee'><a onclick='GATAGM(\"flight_list_title_click_"+t+'", "CONTENT", "'+O+"\");' href='flight_view_detail.html?record_name="+t+"'>"+t+"</a>",z(n)&&(s=s+"<br><div id='map_"+S+"' style='height:100px;' class='panel panel-primary'></div><br><a href='#' class='text-xs' id='map_address_"+S+"'></a>");s=s+"<br><div class='form-group'><textarea class='form-control' id='memoTextarea_"+S+"' rows='3'>",z(l)&&(s+=l);s=(s=(s+="</textarea>")+"<br><button class='btn btn-primary text-xs' type='button' id='btnForUpdateMemo_"+S+"'>"+LANG_JSON_DATA[O].msg_modify_memo+"</button></div></td>")+"<td width='30%' class='center text-xs font-weight-bold mb-1' bgcolor='#fff'> "+o+"</td><td width='20%' bgcolor='#fff'><button class='btn btn-primary text-xs' type='button' id='btnForRemoveFlightData_"+S+"'>"+LANG_JSON_DATA[O].msg_remove+"</button></td></tr>",$("#dataTable-Flight_list > tbody:last").append(s);var d,_=S;$("#map_address_"+_).click((function(){He("map_address_"+_,"CONTENT",O),oe(n,a)})),$("#btnForRemoveFlightData_"+_).click((function(){He("btnForRemoveFlightData_"+_,"CONTENT",O),function(e,t){J(LANG_JSON_DATA[O].modal_title,e+" : "+LANG_JSON_DATA[O].msg_are_you_sure,LANG_JSON_DATA[O].msg_remove,(function(){!function(e,t){var o={action:"position",daction:"delete",clientid:Oe("dev_user_id"),name:e};ye(),_e(o,(function(e){be(),"success"!=e.result?C(LANG_JSON_DATA[O].msg_error_sorry):ne("flight-list-"+t)}),(function(e,t,o){be(),ae("code:"+e.status+"\nmessage:"+e.responseText+"\nerror:"+o)}))}(e,t)}))}(t,_)})),$("#btnForUpdateMemo_"+_).click((function(){He("btnForUpdateMemo_"+_,"CONTENT",O),function(e){var t=c[e],o=Oe("dev_user_id"),n=$("#memoTextarea_"+e).val();if(!z(n))return void C(LANG_JSON_DATA[O].msg_fill_memo);var a={action:"position",daction:"set_memo",clientid:o,name:t.name,memo:n};ye(),_e(a,(function(e){be(),"success"!=e.result?C(LANG_JSON_DATA[O].msg_error_sorry):C(LANG_JSON_DATA[O].msg_success)}),(function(e,t,o){be(),ae("code:"+e.status+"\nmessage:"+e.responseText+"\nerror:"+o)}))}(_)})),z(n)&&(d=function(e,t,o){var n=ol.proj.fromLonLat([o,t]),a=new ol.View({center:n,zoom:12}),i=new ol.source.Vector,r=new ol.layer.Vector({source:i,zIndex:1e4,style:new ol.style.Style({fill:new ol.style.Fill({color:"rgba(255, 255, 255, 0.2)"}),stroke:new ol.style.Stroke({color:"#ff0000",width:2}),image:new ol.style.Circle({radius:7,fill:new ol.style.Fill({color:"#ff0000"})})})}),l=(new ol.Map({target:"map_"+e,layers:[new ol.layer.Tile({preload:4,source:new ol.source.OSM}),r],loadTilesWhileAnimating:!0,view:a}),R(e,{lat:t,lng:o,alt:0}));i.addFeature(l),z(u)&&u.addFeature(l);return i}(_,n,a));if(z(i)&&""!=i)te("#map_address_"+_,i,r,d),te("#map_address_"+_,i,r,u);else if(z(n)){var m=ol.proj.fromLonLat([a,n]);ee("#map_address_"+_,t,m[0],m[1],d)}z(n)&&oe(n,a);S++}(e),c.push(e)}))}function Q(e){z($("#record_name_field"))&&$("#record_name_field").text(e)}function ee(e,t,o,n,a){_e({action:"position",daction:"cada",clientid:Oe("dev_user_id"),x:o,y:n},(function(o){if(be(),"OK"===o.response.status){for(var n,i,r,l=new Array,s="",d=0;d<o.response.result.featureCollection.features.length;d++)try{for(var c=o.response.result.featureCollection.features[d],_=c.geometry,m=(new ol.format.GeoJSON).readFeatures(_),f=0;f<m.length;f++)try{var g=m[f];for(var A in g.id_=c.id,g.properties={},c.properties)try{var p=c.properties[A];""==s&&"addr"==A&&(s=p),g.values_[A]=p,g.properties[A]=p}catch(e){}l.push(g)}catch(e){}}catch(e){}te(e,s,l,a),u&&te(e,s,l,u),n=t,i=s,r=o.response.result.featureCollection.features,_e({action:"position",daction:"set_cada",clientid:Oe("dev_user_id"),cada:r,address:i,name:n},(function(e){}),(function(e,t,o){be(),ae("code:"+e.status+"\nmessage:"+e.responseText+"\nerror:"+o)}))}}),(function(e,t,o){be(),ae("code:"+e.status+"\nmessage:"+e.responseText+"\nerror:"+o)}))}function te(e,t,o,n){var a=new Array,i="";z(ge)&&(Cesium.GeoJsonDataSource.crsNames.customProj=function(e){var t=ol.proj.transform(e,"EPSG:3857","EPSG:4326");return Cesium.Cartesian3.fromDegrees(t[0],t[1],200)},o[0].crs={type:"name",properties:{name:"customProj"}},ge.load(o[0],{stroke:Cesium.Color.RED,strokeWidth:2,clampToGround:!0}));for(var r=0;r<o.length;r++)try{for(var l=o[r],s=l.geometry,d=(new ol.format.GeoJSON).readFeatures(s),c=0;c<d.length;c++)try{var _=d[c];for(var u in _.id_=l.id,_.properties={},l.properties)try{var m=l.properties[u];""==i&&"addr"==u&&(i=m),_.values_[u]=m,_.properties[u]=m}catch(e){}a.push(_)}catch(e){}}catch(e){}n.addFeatures(a),z($(e))&&$(e).text(t)}function oe(e,t){var o=ol.proj.fromLonLat([1*t,1*e]);m.setCenter(o)}function ne(e){$("#"+e).remove()}function ae(e){$("#monitor").html("<font color=red><b>"+e+"</b></font>")}function ie(){if(0!=N.length){$("#chartView").show();var e={datasets:[{label:"온도",borderColor:"#f00",backgroundColor:"#f66",data:N},{label:"습도",borderColor:"#00f",backgroundColor:"#66f",data:h}]};document.getElementById("chartArea").onclick=function(e){He("chartArea","CONTENT",O);var t=window.myScatter.getElementsAtEvent(e);if(t.length>0){var o=t[0]._index,n=b[o];"lng"in n&&"lat"in n&&function(e,t){Je(window.myLine,0,e),"dsec"in t&&Re(t.dsec);E(e),Ge([1*t.lng,1*t.lat],t.alt),W(1*t.lat,1*t.lng,t.alt,t.yaw,t.roll,t.pitch,!0)}(o,n)}};var t=document.getElementById("chartArea").getContext("2d");window.myScatter=new Chart(t,{type:"scatter",tooltipEvents:["click"],data:e,options:{title:{display:!1,text:"Temperature : RED / Humidity : BLUE"},events:["click"],tooltips:{callbacks:{label:function(e,t){var o=b[e.index];return JSON.stringify(o)}},scales:{xAxes:[{ticks:{userCallback:function(e,t,o){return y[e]}}}]},layout:{padding:{left:20,right:30,top:20,bottom:20}}}}})}else $("#chartView").hide()}function re(e){if(0!=z(e)&&""!=e&&"-"!=e){v=new Array,N=new Array,h=new Array,y=new Array,b=new Array,T=new Array;var t=0;e.forEach((function(e){!function(e,t){if("etc"in t&&"t"in t.etc&&"h"in t.etc){N.push({x:e,y:t.etc.t}),h.push({x:e,y:t.etc.h});var o=(d=t.dtimestamp,new Date(d)),n=String(o.getMonth()+1).padStart(2,"0"),a=String(o.getDate()).padStart(2,"0"),i=String(o.getHours()).padStart(2,"0"),r=String(o.getMinutes()).padStart(2,"0"),l=String(o.getSeconds()).padStart(2,"0"),s=o.getFullYear()+"-"+n+"-"+a+" "+i+":"+r+":"+l;y.push(s)}var d;if("lat"in t&&"lng"in t&&"alt"in t){var c=1*t.dsec;b.push({lat:t.lat,lng:t.lng,alt:t.alt,yaw:t.yaw,roll:t.roll,pitch:t.pitch,dsec:c});var _=new ol.Feature({geometry:new ol.geom.Point(ol.proj.fromLonLat([1*t.lng,1*t.lat])),name:"lat: "+t.lat+", lng: "+t.lng+", alt: "+t.alt,mindex:e}),u="#777777";"etc"in t&&"marked"in t.etc&&(u="#ff0000"),_.setStyle(new ol.style.Style({image:new ol.style.Icon({color:u,crossOrigin:"anonymous",src:"./imgs/position3.png"})})),v.push(_),Ve.push(ol.proj.fromLonLat([1*t.lng,1*t.lat])),T.push({x:e,y:t.alt})}}(t,e),t++})),function(e){$("#slider").on("slidestop",(function(e,t){var o=b[t.value];Me(t.value,o)})),$("#slider").slider({min:0,max:e-1,value:0,step:1,slide:function(e,t){var o=b[t.value];Fe(t.value,o)}})}(t),function(){var e=new ol.geom.LineString(Ve),t=new ol.source.Vector({features:[new ol.Feature({geometry:e,name:"Line"})]}),o=new ol.layer.Vector({source:t,style:new ol.style.Style({stroke:new ol.style.Stroke({color:"#ff0000",width:3})})});r.addLayer(o)}(),function(){if(!(v.length<=0)){r.on("click",(function(e){He("map","CONTENT",O);var t=r.forEachFeatureAtPixel(e.pixel,(function(e){return e})),o=null;if(t){var n=t.get("mindex");Ee(n,o=b[n])}var a=ol.proj.transform(e.coordinate,"EPSG:3857","EPSG:4326");Ge([a[0],a[1]],o?o.alt:"0")})),l=new ol.source.Vector({features:v});var e=new ol.layer.Vector({source:l});r.addLayer(e)}}(),M(),ie(),function(){Cesium.Ion.defaultAccessToken="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIwMjRmOWRiNy1hMTgzLTQzNTItOWNlOS1lYjdmZDYxZWFkYmQiLCJpZCI6MzM1MTUsImlhdCI6MTU5ODg0NDIxMH0.EiuUUUoakHeGjRsUoLkAyNfQw0zXCk6Wlij2z9qh7m0",(fe=new Cesium.Viewer("main3dMap",{infoBox:!1,selectionIndicator:!1,shouldAnimate:!1,baseLayerPicker:!1,timeline:!1,animation:!1,clock:!1,fullscreenButton:!1,geocoder:!1,homeButton:!1,navigationHelpButton:!1,navigationInstructionsInitiallyVisible:!1,automaticallyTrackDataSourceClocks:!1,orderIndependentTranslucency:!1,terrainProvider:Cesium.createWorldTerrain()})).scene.globe.enableLighting=!1,fe.scene.globe.depthTestAgainstTerrain=!0,Cesium.Math.setRandomNumberSeed(3);var e=Cesium.JulianDate.fromDate(new Date(2015,2,25,16)),t=(Cesium.JulianDate.addSeconds(e,360,new Cesium.JulianDate),function(e){var t=new Cesium.SampledPositionProperty,o=0;return b.forEach((function(n){var a=Cesium.JulianDate.addSeconds(e,o,new Cesium.JulianDate),i=Cesium.Cartesian3.fromDegrees(n.lng,n.lat,n.alt);t.addSample(a,i),fe.entities.add({position:i,point:{pixelSize:2,color:Cesium.Color.TRANSPARENT,outlineColor:Cesium.Color.RED,outlineWidth:1}}),o++})),t}(e));fe.entities.add({position:t,orientation:new Cesium.VelocityOrientationProperty(t),path:{resolution:1,material:new Cesium.PolylineGlowMaterialProperty({glowPower:.1,color:Cesium.Color.RED}),width:10}}),t=Cesium.Cartesian3.fromDegrees(b[0].lng,b[0].lat,b[0].alt),new Cesium.Cartesian3;ue=Cesium.Transforms.localFrameToFixedFrameGenerator("north","west");var o=fe.camera,n=fe.scene,a=n.screenSpaceCameraController;me=n.primitives.add(Cesium.Model.fromGltf({url:"https://pilot.duni.io/center/imgs/Cesium_Air.glb",color:Ne("YELLOW",1),silhouetteColor:Ne("RED",1),silhouetteSize:2,modelMatrix:Cesium.Transforms.headingPitchRollToFixedFrame(t,Ae,Cesium.Ellipsoid.WGS84,ue),scale:.3,minimumPixelSize:64})),ge=new Cesium.GeoJsonDataSource,fe.dataSources.add(ge),fe.trackedEntity=void 0,fe.zoomTo(fe.entities,new Cesium.HeadingPitchRange(Cesium.Math.toRadians(-90),Cesium.Math.toRadians(-15),1e3)),me.readyPromise.then((function(e){e.activeAnimations.addAll({multiplier:.5,loop:Cesium.ModelAnimationLoop.REPEAT});var t=2*Math.max(e.boundingSphere.radius,o.frustum.near);a.minimumZoomDistance=.5*t,Cesium.Matrix4.multiplyByPoint(e.modelMatrix,e.boundingSphere.center,ve);var n=Cesium.Math.toRadians(230),i=Cesium.Math.toRadians(-20);pe.heading=n,pe.pitch=i,pe.range=50*t,o.lookAt(ve,pe)}))}();var o=b[0];Te(1*o.lat,1*o.lng,o.alt,o.yaw)}}var le=-1,se=-1,de=-1,ce=-1;function _e(e,t,o){$.ajax({url:"https://api.droneplay.io/v1/",dataType:"json",crossDomain:!0,cache:!1,data:JSON.stringify(e),type:"POST",contentType:"application/json; charset=utf-8",beforeSend:function(e){e.setRequestHeader("droneplay-token",Oe("user_token"))},success:function(e){t(e)},error:function(e,t,n){ae("code:"+e.status+"\nmessage:"+e.responseText+"\nerror:"+n),o(e,t,n)}})}var ue,me,fe,ge,Ae=new Cesium.HeadingPitchRoll,pe=new Cesium.HeadingPitchRange,ve=new Cesium.Cartesian3;function Ne(e,t){var o=Cesium.Color[e.toUpperCase()];return Cesium.Color.fromAlpha(o,parseFloat(t))}function he(){var e,t,o=["Road","Aerial","AerialWithLabels"],d=[];for(e=0,t=o.length;e<t;++e)d.push(new ol.layer.Tile({visible:!1,preload:1/0,source:new ol.source.BingMaps({key:"AgMfldbj_9tx3cd298eKeRqusvvGxw1EWq6eOgaVbDsoi7Uj9kvdkuuid-bbb6CK",imagerySet:o[e],maxZoom:19})}));var c=ol.proj.fromLonLat([126.5610038,33.3834381]),_=new ol.control.ScaleLine;l=new ol.source.Vector,n=new ol.View({center:c,zoom:17});var u=new ol.Geolocation({trackingOptions:{enableHighAccuracy:!0},projection:n.getProjection()}),m=new ol.Feature;u.on("change:accuracyGeometry",(function(){m.setGeometry(u.getAccuracyGeometry())}));var f=new ol.Feature;f.setStyle(new ol.style.Style({image:new ol.style.Circle({radius:6,fill:new ol.style.Fill({color:"#3399CC"}),stroke:new ol.style.Stroke({color:"#fff",width:2})})})),a=new ol.Feature({geometry:new ol.geom.Point(ol.proj.fromLonLat([126.5610038,33.3834381]))}),i=new ol.style.Icon({crossOrigin:"anonymous",src:"./imgs/position2.png"}),a.setStyle(new ol.style.Style({image:i}));var g=new ol.source.Vector({features:[a,m,f]}),A=new ol.layer.Vector({source:g,zIndex:1e4});(s=new ol.source.Vector({})).on("tileloadend",(function(){})),s.on("tileloaderror",(function(){C(LANG_JSON_DATA[O].msg_failed_to_load_map_sorry)}));var p=new ol.layer.Vector({source:s,style:new ol.style.Style({fill:new ol.style.Fill({color:"rgba(255, 255, 255, 0.2)"}),stroke:new ol.style.Stroke({color:"#ff0000",width:2}),image:new ol.style.Circle({radius:7,fill:new ol.style.Fill({color:"#ff0000"})})})});_.setUnits("metric"),d.push(A),d.push(p),u.on("change",(function(){$("#accuracy").text(u.getAccuracy()+" [m]"),$("#altitude").text(u.getAltitude()+" [m]"),$("#altitudeAccuracy").text(u.getAltitudeAccuracy()+" [m]"),$("#heading").text(u.getHeading()+" [rad]"),$("#speed").text(u.getSpeed()+" [m/s]"),ye(),Se(u.getPosition(),0,(function(){be()}))})),u.on("error",(function(e){$("#monitor").text(e.message)})),u.on("change:position",(function(){var e=u.getPosition();f.setGeometry(e?new ol.geom.Point(e):null)})),z($("#track"))&&$("#track").change((function(){u.setTracking($("#track").is(":checked"))}));var v=document.getElementById("layer-select");z(v)&&v.addEventListener("change",(function(){for(var e=document.getElementById("layer-select").value,n=0;n<t;++n)d[n].setVisible(o[n]===e)})),d[1].setVisible(!0),d[3].setVisible(!0),d[4].setVisible(!0),r=new ol.Map({target:"mainMap",controls:ol.control.defaults().extend([_]),layers:d,loadTilesWhileAnimating:!0,view:n})}function ye(){$("#loading").show()}function be(){$("#loading").fadeOut(800)}function Te(e,t,o,r){var l=ol.proj.fromLonLat([1*t,1*e]);r=(r*=1)<0?360+r:r,r=Math.PI/180*r,a.setGeometry(new ol.geom.Point(l)),i.setRotation(r),n.setCenter(l)}function Se(e,t,o){var r=n.getZoom(),l=2,s=!1;function d(e){--l,s||0!==l&&e||(s=!0,o(e))}t=(t*=1)<0?360+t:t,t=Math.PI/180*t,a.setGeometry(new ol.geom.Point(e)),i.setRotation(t),n.animate({center:e,duration:1500},d),n.animate({zoom:r-1,duration:750},{zoom:r,duration:750},d)}function Se(e,t,o,n){var a=ol.proj.fromLonLat([1*t,1*e]);Se(a,o,n)}var $e="";function xe(e,t,o){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){o(t,n.result)},n.onerror=function(e){be(),ae("Error: ")}}function Le(e,t){_e({action:"position",daction:"duni_file_upload",clientid:Oe("dev_user_id"),name:e,recordfile:t},(function(e){be(),"success"==e.result?($("#btnForUploadDUNIFlightList").hide(1500),$("#dunifileform").hide(1500),alert(LANG_JSON_DATA[O].msg_success),location.href="flight_view.html"):C(LANG_JSON_DATA[O].msg_error_sorry+" ("+e.reason+")")}),(function(e,t,o){be(),ae("code:"+e.status+"\nmessage:"+e.responseText+"\nerror:"+o)}))}function we(e,t){_e({action:"position",daction:"convert",clientid:Oe("dev_user_id"),name:e,recordfile:t},(function(e){be(),"success"==e.result?($("#btnForUploadFlightList").hide(1500),$("#djifileform").hide(1500),alert(LANG_JSON_DATA[O].msg_success),location.href="flight_view.html"):C(LANG_JSON_DATA[O].msg_error_sorry+" ("+e.reason+")")}),(function(e,t,o){be(),ae("code:"+e.status+"\nmessage:"+e.responseText+"\nerror:"+o)}))}function De(e,t,o){var n=new Date;n.setTime(n.getTime()+60*o*60*24*1e3),document.cookie=e+"="+t+";expires="+n.toUTCString()+";path=/"}function Oe(e){var t=document.cookie.match("(^|;) ?"+e+"=([^;]*)(;|$)");return t?t[2]:null}function Ge(e,t){if(z($("#position_info"))){var o=ol.proj.fromLonLat(e),n=ol.coordinate.toStringHDMS(o)+" [ Lat: "+e[1]+" / Lng: "+e[0]+" / Alt: "+t+" ]";$("#position_info").text(n)}}function Je(e,t,o){if(!z(e))return!1;de>=0&&ke(e,de,ce),null==e.tooltip._active&&(e.tooltip._active=[]);var n=e.tooltip._active,a=e.getDatasetMeta(t).data[o];de=t,ce=o;for(var i=0;i<n.length;i++)if(a._index==n[i]._index)return!1;return n.push(a),e.tooltip._active=n,e.tooltip.update(!0),e.draw(),!0}function Ce(e,t,o){if(!z(e))return!1;le>=0&&ke(e,le,se),null==e.tooltip._active&&(e.tooltip._active=[]);var n=e.tooltip._active,a=e.getDatasetMeta(t).data[o];le=t,se=o;for(var i=0;i<n.length;i++)if(a._index==n[i]._index)return!1;return n.push(a),e.tooltip._active=n,e.tooltip.update(!0),e.draw(),!0}function ke(e,t,o){var n=e.tooltip._active;if(z(n)&&0!=n.length){for(var a=e.getDatasetMeta(t).data[o],i=0;i<n.length;i++)if(a._index==n[i]._index){n.splice(i,1);break}e.tooltip._active=n,e.tooltip.update(!0),e.draw()}}function Fe(e,t){$("#sliderText").html(e),Ge([1*t.lng,1*t.lat],t.alt),W(1*t.lat,1*t.lng,t.alt,t.yaw,t.roll,t.pitch,!0)}function Me(e,t){Ce(window.myScatter,0,e),Je(window.myLine,0,e),$("#sliderText").html(e),"dsec"in t&&Re(t.dsec),Ge([1*t.lng,1*t.lat],t.alt),W(1*t.lat,1*t.lng,t.alt,t.yaw,t.roll,t.pitch,!0)}function Ee(e,t){Ce(window.myScatter,0,e),Je(window.myLine,0,e),B(t.roll),I(t.yaw),P(t.pitch),Ge([1*t.lng,1*t.lat],t.alt),"dsec"in t&&Re(t.dsec),E(e)}function Ie(){$("#movieDataSet").hide(),$("#modifyBtnForMovieData").text(LANG_JSON_DATA[O].msg_modify_youtube_data),$("#modifyBtnForMovieData").off("click"),$("#modifyBtnForMovieData").click((function(){He("modifyBtnForMovieData_show","CONTENT",O),Pe()}))}function Pe(){$("#movieDataSet").show(),$("#modifyBtnForMovieData").text(LANG_JSON_DATA[O].msg_close_youtube_data),$("#modifyBtnForMovieData").off("click"),$("#modifyBtnForMovieData").click((function(){He("modifyBtnForMovieData_hide","CONTENT",O),Ie()}))}function Be(e){if(!z(e)||"-"==e)return $("#youTubePlayer").hide(),void(D=!1);$("#youTubePlayer").show(),D=!0,$("#movieData").val(e);var t=e,o=e.split("=");if(o.length>1&&(t=o[1]),null==L){var n=document.createElement("script");n.src="https://www.youtube.com/player_api",t;var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(n,a)}else L.loadVideoById(t,0,"large")}function Re(e){!0,null!=L&&1==$("#youTubePlayer").is(":visible")&&L.seekTo(e,!0)}function je(e){var t=document.getElementById("gmtGapTime").value;return new Date(e).getTime()+1*t*36e5}function Ue(e,t){var o=document.getElementById("selYear"),n=o.options[o.selectedIndex].value,a=document.getElementById("selMon"),i=a.options[a.selectedIndex].value,r=document.getElementById("selDay"),l=r.options[r.selectedIndex].value,s=document.getElementById("selHour"),d=s.options[s.selectedIndex].value,c=je(n+"-"+i+"-"+l+" "+d+":00:00"),_=je((n=(o=document.getElementById("selYear2")).options[o.selectedIndex].value)+"-"+(i=(a=document.getElementById("selMon2")).options[a.selectedIndex].value)+"-"+(l=(r=document.getElementById("selDay2")).options[r.selectedIndex].value)+" "+(d=(s=document.getElementById("selHour2")).options[s.selectedIndex].value)+":59:59"),u=Oe("dev_user_id"),m="";m=""==e?{action:"dromi",daction:"set",mname:t,data:p,start:c,end:_,clientid:u}:{action:"dromi",daction:"set",name:e,data:p,clientid:u},ye(),_e(m,(function(e){if(w="",be(),"success"==e.result){if(null==e.data||0==e.data.length)return void C("존재하는 데이터가 없습니다.");re(e.data)}}),(function(e,t,o){w="",be(),ae("code:"+e.status+"\nmessage:"+e.responseText+"\nerror:"+o)}))}var Ve=Array();function He(e,t,o){gtag("event",e+"_"+o,{event_category:t,event_label:e}),mixpanel.track(e+"_"+o,{event_category:t,event_label:e})}}]);